var __      = require('./underscore'),
    events  = require('./events'),
    extend  = require('./extend'),
    optionsObj = require('./options')
;

var object = module.exports = function(options) {
  this.options = this.options ? (new this.optionsObject(this.options)).extendWith(options) : new this.optionsObject(options);
  this._events = __.clone(this.constructor._events);
  this.trigger('initialize');
};

__.extend(object.prototype, {
  optionsObject: optionsObj,

  getOption: function(option) {
    return this.options.get(option);
  }
})

__.extend(object, events, {extend: extend});
__.extend(object.prototype, events);