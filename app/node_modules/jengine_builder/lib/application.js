var __      = require('underscore'),
    windows = require('./windows'),
    object  = require('./utils').object,
    path    = require('path')    
;

var Application = module.exports = object.extend({
  closeAllWindows: function() {
    __.values(this.windows, function(window) {
      window.close();
    })
  },

  intro: function() {
    this.closeAllWindows();
    this.windows.intro = new windows.Intro();
    return this.windows.intro;
  }
});

Application.on('initialize', function() {
  this.appjs = require('appjs');
  this.appjs.serveFilesFrom(path.join(path.dirname(process.mainModule.filename), 'app', 'content'));
  this.windows = {};
});