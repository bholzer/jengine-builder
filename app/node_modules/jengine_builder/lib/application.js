var utils = require('./utils'),
    _     = require('underscore'),
    windows = require('./windows')
;

var Application = module.exports = function() {
  this.appjs = require('appjs');
  this.windows = {};
};

Application.extend = utils.extend;

_.extend(Application.prototype, {
  closeAllWindows: function() {
    _.values(this.windows, function(window) {
      window.close();
    })
  },

  intro: function() {
    this.closeAllWindows();
    this.windows.intro = new windows.Intro();
    return this.windows.intro;
  }
});