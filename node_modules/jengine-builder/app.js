var path = require('path');
var JEngineBuilder = module.exports = function (options) {
  var self = this;
  Backbone.history.start({root: document.location.toString()});
  _.each(this.constructor.Routers, function (router, name) {
    self.Routers[name] = new router;
  });
  Backbone.history.loadUrl();
};

_.extend(JEngineBuilder, {
  Routers: browserRequire('./routers'),
  Views: browserRequire('./views')
});

_.extend(JEngineBuilder.prototype, {
  set ActiveView(view) {
    if (this.ActiveView) {
      this.ActiveView.remove();
    }
    return view;
  },
  Routers: {}
});